{"ast":null,"code":"import _slicedToArray from \"/home/yrd/projects/challenges/mern-calendar/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/home/yrd/projects/challenges/mern-calendar/client/src/components/calendar/CalendarScreen.jsx\";\n\nimport { useEffect, useState } from \"react\";\nimport { Calendar, momentLocalizer } from \"react-big-calendar\";\nimport moment from \"moment\";\nimport Navbar from \"../ui/Navbar\";\nimport CalendarEvent from \"./CalendarEvent\";\nimport \"react-big-calendar/lib/css/react-big-calendar.css\";\nimport \"./calendar.css\";\nimport CalendarModal from \"./CalendarModal\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { uiOpenModal } from \"../../actions/ui\";\nimport { eventClearActive, eventSetActive, eventStartLoading } from \"../../actions/event\";\nimport AddNewBtn from \"../ui/AddNewBtn\";\nimport DeleteBtn from \"../ui/DeleteBtn\";\nvar localizer = momentLocalizer(moment);\n\nvar CalendarScreen = function CalendarScreen() {\n  var dispatch = useDispatch();\n\n  var _useSelector = useSelector(function (state) {\n    return state;\n  }),\n      calendar = _useSelector.calendar,\n      auth = _useSelector.auth,\n      ui = _useSelector.ui;\n\n  var events = calendar.events,\n      activeEvent = calendar.activeEvent;\n  var id = auth.id;\n  var modalOpen = ui.modalOpen;\n\n  var _useState = useState(localStorage.getItem(\"lastView\") || \"month\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      lastView = _useState2[0],\n      setLastView = _useState2[1];\n\n  useEffect(function () {\n    dispatch(eventStartLoading());\n  }, [dispatch]);\n\n  var onDoubleClick = function onDoubleClick(e) {\n    dispatch(uiOpenModal());\n  };\n\n  var onSelect = function onSelect(e) {\n    dispatch(eventSetActive(e));\n  };\n\n  var onViewChange = function onViewChange(e) {\n    setLastView(e);\n    localStorage.setItem(\"lastView\", e);\n  };\n\n  var onSelectSlot = function onSelectSlot(e) {\n    activeEvent && dispatch(eventClearActive());\n\n    if (e.action === \"select\" || e.action === \"doubleClick\") {\n      dispatch(eventSetActive({\n        title: \"\",\n        notes: \"\",\n        start: e.start,\n        end: e.end\n      }));\n      dispatch(uiOpenModal());\n    }\n  };\n\n  var eventStyleGetter = function eventStyleGetter(event, start, end, isSelected) {\n    var style = {\n      backgroundColor: id === event.user._id ? \"#367CF7\" : \"#465660\",\n      opacity: 0.8,\n      display: \"block\",\n      color: \"white\"\n    };\n    return {\n      style: style\n    };\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"calendar\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Navbar, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"calendar__container\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Calendar, {\n    localizer: localizer,\n    events: events,\n    startAccessor: \"start\",\n    endAccessor: \"end\",\n    eventPropGetter: eventStyleGetter,\n    onDoubleClickEvent: onDoubleClick,\n    onSelectEvent: onSelect,\n    onView: onViewChange,\n    onSelectSlot: onSelectSlot,\n    selectable: true,\n    view: lastView,\n    components: {\n      event: CalendarEvent\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 9\n    }\n  })), activeEvent && !modalOpen && /*#__PURE__*/React.createElement(DeleteBtn, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 37\n    }\n  }), /*#__PURE__*/React.createElement(AddNewBtn, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(CalendarModal, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }\n  }));\n};\n\nexport default CalendarScreen;","map":{"version":3,"names":["useEffect","useState","Calendar","momentLocalizer","moment","Navbar","CalendarEvent","CalendarModal","useDispatch","useSelector","uiOpenModal","eventClearActive","eventSetActive","eventStartLoading","AddNewBtn","DeleteBtn","localizer","CalendarScreen","dispatch","state","calendar","auth","ui","events","activeEvent","id","modalOpen","localStorage","getItem","lastView","setLastView","onDoubleClick","e","onSelect","onViewChange","setItem","onSelectSlot","action","title","notes","start","end","eventStyleGetter","event","isSelected","style","backgroundColor","user","_id","opacity","display","color"],"sources":["/home/yrd/projects/challenges/mern-calendar/client/src/components/calendar/CalendarScreen.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport { Calendar, momentLocalizer } from \"react-big-calendar\";\nimport moment from \"moment\";\n\nimport Navbar from \"../ui/Navbar\";\nimport CalendarEvent from \"./CalendarEvent\";\n\nimport \"react-big-calendar/lib/css/react-big-calendar.css\";\nimport \"./calendar.css\";\nimport CalendarModal from \"./CalendarModal\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { uiOpenModal } from \"../../actions/ui\";\nimport {\n  eventClearActive,\n  eventSetActive,\n  eventStartLoading,\n} from \"../../actions/event\";\nimport AddNewBtn from \"../ui/AddNewBtn\";\nimport DeleteBtn from \"../ui/DeleteBtn\";\n\nconst localizer = momentLocalizer(moment);\n\nconst CalendarScreen = () => {\n  const dispatch = useDispatch();\n  const { calendar, auth, ui } = useSelector((state) => state);\n  const { events, activeEvent } = calendar;\n  const { id } = auth;\n  const { modalOpen } = ui;\n  const [lastView, setLastView] = useState(\n    localStorage.getItem(\"lastView\") || \"month\"\n  );\n\n  useEffect(() => {\n    dispatch(eventStartLoading());\n  }, [dispatch]);\n\n  const onDoubleClick = (e) => {\n    dispatch(uiOpenModal());\n  };\n\n  const onSelect = (e) => {\n    dispatch(eventSetActive(e));\n  };\n\n  const onViewChange = (e) => {\n    setLastView(e);\n    localStorage.setItem(\"lastView\", e);\n  };\n\n  const onSelectSlot = (e) => {\n    activeEvent && dispatch(eventClearActive());\n    if (e.action === \"select\" || e.action === \"doubleClick\") {\n      dispatch(\n        eventSetActive({\n          title: \"\",\n          notes: \"\",\n          start: e.start,\n          end: e.end,\n        })\n      );\n      dispatch(uiOpenModal());\n    }\n  };\n\n  const eventStyleGetter = (event, start, end, isSelected) => {\n    const style = {\n      backgroundColor: id === event.user._id ? \"#367CF7\" : \"#465660\",\n      opacity: 0.8,\n      display: \"block\",\n      color: \"white\",\n    };\n\n    return { style };\n  };\n\n  return (\n    <div className=\"calendar\">\n      <Navbar />\n      <div className=\"calendar__container\">\n        <Calendar\n          localizer={localizer}\n          events={events}\n          startAccessor=\"start\"\n          endAccessor=\"end\"\n          eventPropGetter={eventStyleGetter}\n          onDoubleClickEvent={onDoubleClick}\n          onSelectEvent={onSelect}\n          onView={onViewChange}\n          onSelectSlot={onSelectSlot}\n          selectable={true}\n          view={lastView}\n          components={{ event: CalendarEvent }}\n        />\n      </div>\n      {activeEvent && !modalOpen && <DeleteBtn />}\n      <AddNewBtn />\n      <CalendarModal />\n    </div>\n  );\n};\nexport default CalendarScreen;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}